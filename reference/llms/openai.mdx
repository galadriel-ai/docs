---
title: "OpenAI"
---



### createOpenAiLlmCall

This is a function that calls an OpenAI LLM. You can configure almost any parameter that can be configured in the [Create chat completion](https://platform.openai.com/docs/api-reference/chat/create) OpenAI endpoint.

**Arguments**

<ParamField path="promptCallbackId" type="uint">
  Identifier which will be passed into the callback.
</ParamField>

<ParamField path="config" type="OpenAiRequest">
  An object that contains all configuration parameters for the LLM call. See [below](#openairequest-object) for details on the OpenAiRequest object.
</ParamField>

**Returns**

<ResponseField name="counter" type="uint">
  An internal counter of the oracle, which is incremented on every call.
</ResponseField>


#### OpenAiRequest object

The `OpenAiRequest` object (see source in [IOracle.sol](https://github.com/galadriel-ai/contracts/blob/main/contracts/contracts/interfaces/IOracle.sol)) has the following fields:

<ParamField path="model" type="string">
  The identifier for the model, `gpt-4-turbo`, `gpt-4-turbo-preview` or `gpt-3.5-turbo-1106`.
</ParamField>

<ParamField path="frequencyPenalty" type="int8">
  An integer between -20 and 20, mapped to a float between -2.0 and 2.0; values greater than 20 are treated as null.
</ParamField>

<ParamField path="logitBias" type="string">
  A JSON string representing logit bias or an empty string if none.
</ParamField>

<ParamField path="maxTokens" type="uint32">
  The maximum number of tokens to generate, with 0 indicating null.
</ParamField>

<ParamField path="presencePenalty" type="int8">
  An integer between -20 and 20, mapped to a float between -2.0 and 2.0; values greater than 20 are treated as null.
</ParamField>

<ParamField path="responseFormat" type="string">
  A JSON string specifying the format of the response or an empty string if default.
</ParamField>

<ParamField path="seed" type="uint">
  A seed for the random number generator, with 0 indicating null.
</ParamField>

<ParamField path="stop" type="string">
  A string specifying stop sequences, or an empty string to indicate null.
</ParamField>

<ParamField path="temperature" type="uint">
  A temperature setting for randomness, with values from 0 to 20; values greater than 20 indicate null.
</ParamField>

<ParamField path="topP" type="uint">
  Controls diversity via nucleus sampling, with values from 0 to 100 percent; values greater than 100 indicate null.
</ParamField>

<ParamField path="tools" type="string">
  A JSON list of tools in OpenAI format, or an empty string for null, where names must match supported tools.
</ParamField>

<ParamField path="toolChoice" type="string">
  Specifies tool selection strategy, with values "none", "auto", or an empty string which defaults to "auto" on OpenAI's side.
</ParamField>

<ParamField path="user" type="string">
  Identifier for the user making the request.
</ParamField>


### onOracleOpenAiLlmResponse

Called when the result of an LLM call, created with [`createOpenAiLlmCall`](#createopenaillmcall), is available.

**Arguments**

<ParamField path="callbackId" type="uint">
  The identifier you passed into the `createOpenAiLlmCall` method.
</ParamField>

<ParamField path="response" type="OpenAiResponse">
  The result of the LLM call. See [below](#openairesponse-object) for details on the OpenAiResponse object.
</ParamField>

<ParamField path="errorMessage" type="string">
  An error message. Contains an empty string if there was no error, and a description of the error otherwise.
</ParamField>


#### OpenAiResponse object

The `OpenAiResponse` object (see source in [ChatOracle.sol](https://github.com/galadriel-ai/contracts/blob/main/contracts/contracts/ChatOracle.sol)) has the following fields, most of which map directly to the fields in the [OpenAI API response](https://platform.openai.com/docs/api-reference/chat/object):

<ParamField path="id" type="string">
  Unique identifier for the completion, generated by OpenAI.
</ParamField>

<ParamField path="content" type="string">
  The model output. Either this field or `functionArguments` and `functionName` will be populated, depending on whether the output is a normal message or a function call.
</ParamField>

<ParamField path="functionName" type="string">
  Name of the function invoked, if any.
</ParamField>

<ParamField path="functionArguments" type="string">
  Arguments passed to the function, if any, as a JSON string. For format details, refer to the specific function documentation.
</ParamField>

<ParamField path="created" type="uint64">
  Timestamp of creation.
</ParamField>

<ParamField path="model" type="string">
  The model name used for generation.
</ParamField>

<ParamField path="systemFingerprint" type="string">
  Identifier for the system generating the completion.
</ParamField>

<ParamField path="object" type="string">
  Type of the object, always `chat.completion`.
</ParamField>

<ParamField path="completionTokens" type="uint32">
  Number of tokens generated in the completion.
</ParamField>

<ParamField path="promptTokens" type="uint32">
  Number of tokens in the prompt.
</ParamField>

<ParamField path="totalTokens" type="uint32">
  Total number of tokens, including both prompt and completion.
</ParamField>